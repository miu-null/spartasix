<div class="container event_container">
  <div>
    <div><a href="newevent" class="new_event">+ new post</a></div>
    <div class="searchCount" id="searchCount">ê²€ìƒ‰ê²°ê³¼ : ì´ <%= searchCount %>ê±´</div>
  </div>
  <div class="event_table_container">
    <table class="table table-hover event_table">
      <thead id="event_thead">
        <tr>
          <th>Event</th>
          <th>Title</th>
          <th>Writer</th>
          <th>í–‰ì‚¬ì‹œì‘</th>
          <th>ì‘ì„±ì¼</th>
          <th>View</th>
          <th>Likes</th>

        </tr>
      </thead>
      <tbody>
        <% if (searchCount) { %>
          <% slicedData.forEach(data=> { %>
            <tr id="event_tr">
              <td id="Id"><a class="postLink" href='list/<%= data.id%>'>
                  <%= data.id %>
                </a></td>
              <td id="Title"><a class="postLink" href='list/<%= data.id%>'>
                  <%= data.title %>
                </a></td>
              <td id="Writer"><a class="postLink" href="/userpage/<%= data.userId %>">
                  <%= data.user.nickName %>
                </a></td>
              <td id="Date">
                <%= data.startdate %>
              </td>
              <td id="Date">
                <%= reformPostDate(data.createdAt) %>
              </td>
              <td id="View">
                <%= data.viewCount %>
              </td>
              <td id="Likes">
                <%= data.Likes %>
              </td>
              <% }) %>
                <% } else { %>
                  <td id="club_Likes">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
                  <% } %>
            </tr>
      </tbody>
    </table>
  </div>
</div>

<div id="pagination">
  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
      <% if (unitStart - 1> 0 ) { %>
        <li class="page-item">
          <a class="page-link" href="search?searchOption=<%= searchOption %>&term=<%=term.term %>&page=<%= unitStart -1 %>" tabindex="-1"
            aria-disabled="true">ì´ì „</span>
          </a>
        </li>
        <% } %>
          <% for (let i=unitStart; i <=unitEnd; i++) { %>
            <% if (i <=lastPage) { %>
              <% if ( i===page) { %>
                <li class="page-item active" aria-current="page">
                  <span class="page-link">
                    <%= i %>
                  </span>
                </li>
                <% } else { %>
                  <li class="page-item"><a class="page-link" href="search?searchOption=<%= searchOption %>&term=<%=term.term %>&page=<%= i %>">
                      <%= i %>
                    </a></li>
                  <% } %>
                    <% } %>
                      <% } %>
                          <% if (unitEnd < lastPage) { %>
                            <li class="page-item">
                              <a class="page-link" href="search?searchOption=<%= searchOption %>&term=<%=term.term %>&page=<%= unitEnd +1 %>">ë‹¤ìŒ
                              </a>
                            </li>
                            <% } %> 
      </ul>
    </nav>
  </div>
  
<section id="search" class="search-wrap" >
  <form action="/events/search" class="search-form">
      <div class="input-group">
          <div class="input-group-append" >
          <select class="form-select" name="searchOption" id="searchOption" >
              <option value="title">ì œëª©</option>
              <option value="titleAndContent" selected>ì œëª©+ë‚´ìš©</option>
          </select>
          </div>
          <input type="search" id="term" name="term" class="form-control" placeholder="ğŸ”ê²€ìƒ‰"
          aria-label="Search">
      </div>
      </div>
  </form>
  </section>
  
  <script>
  // ê²€ìƒ‰:ì´ì „ì— ì„ íƒëœ ë“œë¡­ë‹¤ìš´ ì˜µì…˜ì„ ë¶ˆëŸ¬ì˜´
  const selectedOption = localStorage.getItem('selectedOption');
  if (selectedOption) {
      document.getElementById('searchOption').value = selectedOption;
  }
  
  // ê²€ìƒ‰:ë“œë¡­ë‹¤ìš´ ì˜µì…˜ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ localStorageì— ì €ì¥í•¨
  document.getElementById('searchOption').addEventListener('change', function() {
      localStorage.setItem('selectedOption', this.value);
  });
  </script>